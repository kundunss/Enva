@model SistemApp.Models.MailEntry

@{
    ViewData["Title"] = "Mail Kaydı Detayları";
}

<div class="container mx-auto px-4 py-6 max-w-3xl">
<h1 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">Mail Kaydı Detayları</h1>

    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6">
        <dl class="grid grid-cols-1 sm:grid-cols-3 gap-x-6 gap-y-4 text-gray-700 dark:text-gray-300">
            <dt class="font-semibold"> @Html.DisplayNameFor(model => model.Personnel) </dt>
            <dd class="sm:col-span-2"> @(Model.Personnel != null ? Model.Personnel.FullName : "-") </dd>

            <dt class="font-semibold"> @Html.DisplayNameFor(model => model.EmailUsername) </dt>
            <dd class="sm:col-span-2"> @Html.DisplayFor(model => model.EmailUsername) </dd>

            <dt class="font-semibold"> @Html.DisplayNameFor(model => model.Domain) </dt>
            <dd class="sm:col-span-2"> @(Model.Domain != null ? Model.Domain.Name : "-") </dd>

            <dt class="font-semibold"> @Html.DisplayNameFor(model => model.EmailAddress) </dt>
            <dd class="sm:col-span-2"> @Html.DisplayFor(model => model.EmailAddress) </dd>

            <dt class="font-semibold"> @Html.DisplayNameFor(model => model.Password) </dt>
            <dd class="sm:col-span-2"> @Html.DisplayFor(model => model.Password) </dd>

            <dt class="font-semibold"> @Html.DisplayNameFor(model => model.IsArchived) </dt>
            <dd class="sm:col-span-2"> 
                @Html.DisplayFor(model => model.IsArchived) 
            </dd>
        </dl>
    </div>

    <div class="flex space-x-4 mb-6">
        <a asp-action="Edit" asp-route-id="@Model.Id" 
           class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors duration-200">
           Düzenle
        </a>
        <a asp-action="Index" 
           class="px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors duration-200">
           Listeye Dön
        </a>
    </div>

    @if (Model.PasswordHistory != null && Model.PasswordHistory.Any())
    {
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
            <h4 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">Şifre Geçmişi</h4>
            <div class="overflow-x-auto">
                <table class="min-w-full table-auto border-collapse border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300">
                    <thead>
                        <tr class="bg-gray-100 dark:bg-gray-700">
                            <th class="border border-gray-300 dark:border-gray-600 px-4 py-2 text-left">Tarih</th>
                            <th class="border border-gray-300 dark:border-gray-600 px-4 py-2 text-left">Eski Şifre</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var history in Model.PasswordHistory.OrderByDescending(h => h.ChangedDate))
                        {
                            <tr class="even:bg-gray-50 dark:even:bg-gray-900">
                                <td class="border border-gray-300 dark:border-gray-600 px-4 py-2">@history.ChangedDate.ToString("yyyy-MM-dd HH:mm")</td>
                                <td class="border border-gray-300 dark:border-gray-600 px-4 py-2">@history.OldPassword</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    }
</div>
